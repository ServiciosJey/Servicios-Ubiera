<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Servicios Ubiera ‚Äî Asesor√≠a Contable, Financiera y Fiscal</title>
<meta name="description" content="Asesor√≠a contable, financiera y fiscal para pymes y emprendedores. Igualas contables y fiscales, DGII (606‚Äì609), TSS/SIRLA, Facturaci√≥n Electr√≥nica. Atenci√≥n presencial y virtual.">
<meta name="theme-color" content="#0E5A6A">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
  /* ========= MOBILE-FIRST (prioriza celulares) ========= */
  :root{
    --bg:#ffffff;
    --paper:#F5F0EA;
    --ink:#222;
    --muted:#5f6c72;
    --primary:#0E5A6A;   /* teal oscuro */
    --primary-2:#66C299; /* verde medio */
    --accent:#8FD6B3;    /* mint */
    --line:rgba(20,20,20,.10);

    --radius:16px;
    --shadow:0 10px 24px rgba(0,0,0,.08);
    --shadow-2:0 8px 22px rgba(14,90,106,.18);
    --trans:.35s cubic-bezier(.2,.8,.2,1);
  }
  :root[data-theme="dark"]{
    --bg:#0f1113;
    --paper:#161a1d;
    --ink:#e9eef1;
    --muted:#9aa7ad;
    --primary:#66C299;
    --primary-2:#8FD6B3;
    --accent:#0E5A6A;
    --line:rgba(255,255,255,.12);
    --shadow:0 10px 28px rgba(0,0,0,.5);
    --shadow-2:0 8px 22px rgba(0,0,0,.5);
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Poppins,system-ui,Segoe UI,Roboto,Arial}
  img{max-width:100%;display:block}

  .container{width:min(980px,92%);margin:auto}

  /* ===== Header ===== */
  header{
    position:sticky;top:0;z-index:50;background:rgba(255,255,255,.75);
    backdrop-filter: blur(8px);border-bottom:1px solid var(--line)
  }
  :root[data-theme="dark"] header{background:rgba(15,17,19,.6)}
  .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 0}
  .brand{display:flex;align-items:center;gap:10px}
  .brand img{width:36px;height:36px;border-radius:10px;box-shadow:var(--shadow)}
  .brand b{font-family:"Playfair Display",serif;font-size:18px}

  .theme{display:flex;align-items:center;gap:8px}
  .btn{
    display:inline-flex;align-items:center;gap:10px;
    padding:10px 14px;border-radius:999px;border:1px solid var(--line);font-weight:600
  }
  .cta{background:linear-gradient(135deg,var(--primary),var(--primary-2));color:#fff;border:none;box-shadow:var(--shadow-2)}
  .ghost{background:transparent}

  .icon{width:18px;height:18px}

  /* ===== Hero ===== */
  .hero{display:grid;grid-template-columns:1fr;gap:16px;align-items:center;padding:22px 0}
  .pill{display:inline-flex;gap:8px;align-items:center;background:var(--paper);padding:6px 10px;border-radius:999px;border:1px solid var(--line);font-size:12px;color:var(--muted)}
  h1{font-family:"Playfair Display",serif;font-size:clamp(26px,7vw,40px);line-height:1.14;margin:10px 0}
  .lead{font-size:15px;color:var(--muted);margin:8px 0 12px}
  .hero-actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .hero-card{background:var(--paper);border:1px solid var(--line);border-radius:var(--radius);padding:12px;box-shadow:var(--shadow)}
  .hero-card img{border-radius:12px}

  /* ===== Sections ===== */
  section{padding:26px 0}
  .section-title{margin-bottom:12px}
  .section-title h2{font-family:"Playfair Display",serif;font-size:clamp(20px,6vw,30px);margin:0}
  .section-title p{color:var(--muted);margin:4px 0 0}

  /* ===== Cards / grids ===== */
  .grid-3{display:grid;grid-template-columns:1fr;gap:10px}
  .card{background:var(--paper);border:1px solid var(--line);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow)}
  .card h3{margin:6px 0 4px;font-size:17px}
  .muted{color:var(--muted)}

  /* ===== Carousel ===== */
  .carousel-wrap{position:relative}
  .carousel{
    overflow:hidden;border-radius:var(--radius);border:1px solid var(--line);background:var(--paper);box-shadow:var(--shadow);
    touch-action: pan-y; /* permite swipe horizontal en m√≥vil sin bloquear scroll vertical */
  }
  .track{display:flex;transition:transform .55s var(--trans);will-change:transform}
  .slide{min-width:100%;display:grid;grid-template-columns:1fr;gap:10px;align-items:center;padding:12px}
  .slide img{width:100%;height:210px;object-fit:cover;border-radius:12px}
  .badge{display:inline-flex;align-items:center;gap:8px;font-size:12px;color:#fff;background:var(--primary);padding:6px 10px;border-radius:999px}
  .slide h3{margin:8px 0 6px}
  .slide p{color:var(--muted);margin:0 0 6px;font-size:15px}
  .dots{display:flex;gap:6px;justify-content:center;margin-top:8px}
  .dot{width:8px;height:8px;border-radius:50%;background:var(--line)}
  .dot.active{background:linear-gradient(135deg,var(--primary),var(--primary-2))}
  .ctrl{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;pointer-events:none}
  .ctrl button{
    pointer-events:auto;border:none;background:rgba(0,0,0,.03);color:var(--ink);
    width:38px;height:38px;border-radius:12px;display:grid;place-items:center;transition:background .2s
  }
  .ctrl button:active{transform:scale(.98)}
  :root[data-theme="dark"] .ctrl button{background:rgba(255,255,255,.06)}

  /* ===== Plans ===== */
  .plans{display:grid;grid-template-columns:1fr;gap:10px}
  .plan .head{display:flex;align-items:center;gap:10px;margin-bottom:6px}
  .plan ul{margin:8px 0 0;padding-left:18px;line-height:1.6;color:var(--muted)}

  /* ===== About ===== */
  .about{display:grid;grid-template-columns:1fr;gap:14px;align-items:center}
  .about img{border-radius:16px;box-shadow:var(--shadow)}
  .about .bio{background:var(--paper);border:1px solid var(--line);padding:14px;border-radius:var(--radius)}

  /* ===== FAQ ===== */
  details{background:var(--paper);border:1px solid var(--line);border-radius:14px;padding:12px}
  details+details{margin-top:8px}
  summary{cursor:pointer;font-weight:600}

  /* ===== Contact ===== */
  .contact{display:grid;grid-template-columns:1fr;gap:10px;align-items:center}
  .contact .block{background:var(--paper);border:1px solid var(--line);padding:14px;border-radius:var(--radius)}
  .schedule{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .schedule div{background:rgba(0,0,0,.03);border:1px solid var(--line);border-radius:12px;padding:8px;text-align:center}
  :root[data-theme="dark"] .schedule div{background:rgba(255,255,255,.06)}

  /* ===== Footer ===== */
  footer{padding:18px 0;border-top:1px solid var(--line);color:var(--muted);font-size:14px;text-align:center}

  /* ===== WhatsApp sticky ===== */
  .wa{
    position:fixed;right:16px;bottom:16px;z-index:60;display:flex;align-items:center;gap:8px;
    background:linear-gradient(135deg,#25D366,#128C7E);color:#fff;padding:12px 14px;border-radius:999px;
    box-shadow:0 10px 30px rgba(18,140,126,.45);font-weight:700
  }
  .wa svg{width:18px;height:18px}

  /* ===== Reveal animations ===== */
  .reveal{opacity:0;transform:translateY(14px);transition:opacity .6s ease,transform .6s ease}
  .reveal.show{opacity:1;transform:none}
  @keyframes floatY{from{transform:translateY(0)}50%{transform:translateY(-6px)}to{transform:translateY(0)}}
  .float{animation:floatY 4s ease-in-out infinite}

  /* ===== Mejoras en pantallas medianas+ ===== */
  @media (min-width:900px){
    .hero{grid-template-columns:1.1fr .9fr;padding:36px 0}
    .grid-3{grid-template-columns:repeat(3,1fr)}
    .plans{grid-template-columns:repeat(3,1fr)}
    .about{grid-template-columns:.9fr 1.1fr}
    .contact{grid-template-columns:1.1fr .9fr}
    .slide{grid-template-columns:1.1fr .9fr}
    .slide img{height:260px}
  }
</style>
</head>
<body>
  <!-- ===== Header ===== -->
  <header>
    <div class="container nav">
      <div class="brand">
        <img src="https://i.postimg.cc/rwWHg0W8/248984051-3047610508852934-4065540886122877043-n.jpg" alt="Logo Servicios Ubiera">
        <b>Servicios Ubiera</b>
      </div>
      <div class="theme">
        <a class="btn ghost" href="#contacto">Horario</a>
        <button id="themeToggle" class="btn ghost" title="Tema claro/oscuro">üåì</button>
        <a class="btn cta" href="https://wa.me/18494795252" target="_blank" rel="noopener">Cotizar por WhatsApp</a>
      </div>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="container hero">
    <div>
      <span class="pill reveal">Asesor√≠a Contable, Financiera y Fiscal</span>
      <h1 class="reveal" style="transition-delay:.08s">Haz de tu contabilidad <span style="color:var(--primary)">tu ventaja competitiva</span>.</h1>
      <p class="lead reveal" style="transition-delay:.16s">Igualas contables y fiscales, implementaci√≥n de sistemas contables, DGII (606‚Äì609), TSS/SIRLA/DGII y Facturaci√≥n Electr√≥nica para pymes y emprendedores. Atenci√≥n <b>presencial y virtual</b>.</p>
      <div class="hero-actions reveal" style="transition-delay:.24s">
        <a class="btn cta" href="https://wa.me/18494795252" target="_blank" rel="noopener">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.52 3.48A11.93 11.93 0 0 0 12.05 0C5.46.03.11 5.38.13 11.97c0 2.11.55 4.08 1.52 5.8L0 24l6.39-1.64a12 12 0 0 0 5.66 1.45h.01c6.59 0 11.94-5.35 11.95-11.94A11.9 11.9 0 0 0 20.52 3.48ZM12.06 22a9.96 9.96 0 0 1-5.08-1.4l-.36-.21-3.79.97 1.01-3.69-.24-.38A10 10 0 1 1 22.06 12 10 10 0 0 1 12.06 22Z"/></svg>
          Cotizar por WhatsApp
        </a>
        <a class="btn ghost" href="#servicios">Ver servicios</a>
      </div>
    </div>
    <div class="hero-card float">
      <img src="https://source.unsplash.com/800x540/?finance,office" alt="Equipo contable">
      <div class="muted" style="font-size:14px;margin-top:8px">‚ÄúLa clave para crecer est√° en los n√∫meros bien gestionados.‚Äù</div>
    </div>
  </section>

  <!-- ===== BENEFICIOS ===== -->
  <section class="container">
    <div class="section-title">
      <h2 class="reveal">Beneficios para tu negocio</h2>
      <p class="muted reveal">Ahorra tiempo, evita multas y toma decisiones con datos reales.</p>
    </div>
    <div class="grid-3">
      <div class="card reveal"><h3>Orden y cumplimiento</h3><p class="muted">Declaraciones a tiempo (DGII, TSS/SIRLA), control documental y cero estr√©s.</p></div>
      <div class="card reveal"><h3>Acompa√±amiento experto</h3><p class="muted">Atenci√≥n cercana y personalizada por profesional con +10 a√±os de experiencia.</p></div>
      <div class="card reveal"><h3>Eficiencia y ahorro</h3><p class="muted">Estandarizaci√≥n, automatizaci√≥n y reducci√≥n de costos administrativos.</p></div>
    </div>
  </section>

  <!-- ===== SERVICIOS (CARRUSEL CIRCULAR) ===== -->
  <section id="servicios" class="container">
    <div class="section-title">
      <h2 class="reveal">Servicios</h2>
      <p class="muted reveal">Desliza o deja que el carrusel avance solo (cada 2 s). Se detiene al tocar.</p>
    </div>

    <div class="carousel-wrap reveal">
      <div class="carousel" id="carousel">
        <div class="track" id="track">
          <!-- Slides reales (JS a√±adir√° clones para el loop) -->
          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?accounting,advisor" alt="Asesor√≠a contable y fiscal">
            <div>
              <span class="badge">Asesor√≠a</span>
              <h3>Asesor√≠a contable y fiscal</h3>
              <p>Diagn√≥stico, cumplimiento y estrategia para operar en orden y sin sorpresas.</p>
            </div>
          </article>

          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?financial,statement" alt="Estados financieros">
            <div>
              <span class="badge">Finanzas</span>
              <h3>Elaboraci√≥n de estados financieros</h3>
              <p>EEFF precisos para decisiones, bancos e inversionistas.</p>
            </div>
          </article>

          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?audit,finance" alt="Auditor√≠a">
            <div>
              <span class="badge">Control</span>
              <h3>Auditor√≠a contable y fiscal</h3>
              <p>Revisi√≥n independiente, hallazgos y planes de mejora.</p>
            </div>
          </article>

          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?tax,planning" alt="Planificaci√≥n fiscal">
            <div>
              <span class="badge">Fiscal</span>
              <h3>Planificaci√≥n fiscal</h3>
              <p>Estrategias para optimizar la carga impositiva cumpliendo la norma.</p>
            </div>
          </article>

          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?erp,software" alt="Sistemas contables">
            <div>
              <span class="badge">Sistemas</span>
              <h3>Implementaci√≥n de sistemas contables</h3>
              <p>Selecci√≥n, parametrizaci√≥n y capacitaci√≥n del equipo.</p>
            </div>
          </article>

          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?business,registration" alt="Constituci√≥n de compa√±√≠as">
            <div>
              <span class="badge">Empresas</span>
              <h3>Constituci√≥n de compa√±√≠as (SRL / EIRL)</h3>
              <p>Nombre comercial, estatutos, registro mercantil, RNC y m√°s.</p>
            </div>
          </article>

          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?analytics,chart" alt="An√°lisis financiero">
            <div>
              <span class="badge">An√°lisis</span>
              <h3>An√°lisis financiero</h3>
              <p>Indicadores, flujo de caja y tableros para decidir mejor.</p>
            </div>
          </article>

          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?document,office" alt="TSS, SIRLA y DGII">
            <div>
              <span class="badge">Gesti√≥n</span>
              <h3>Manejo de TSS, SIRLA y Oficina Virtual DGII</h3>
              <p>Altas/bajas, conciliaciones y reportes al d√≠a.</p>
            </div>
          </article>

          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?invoice,tax" alt="Formatos DGII 606‚Äì609">
            <div>
              <span class="badge">DGII</span>
              <h3>Formatos 606 ¬∑ 607 ¬∑ 608 ¬∑ 609</h3>
              <p>Registros y env√≠os correctos para evitar contingencias.</p>
            </div>
          </article>

          <article class="slide">
            <img src="https://source.unsplash.com/900x600/?e-invoice,computer" alt="Facturaci√≥n electr√≥nica">
            <div>
              <span class="badge">FE</span>
              <h3>Facturaci√≥n electr√≥nica</h3>
              <p>Implementaci√≥n y mejores pr√°cticas: seguridad, trazabilidad y ahorro.</p>
            </div>
          </article>
        </div>
      </div>

      <div class="ctrl">
        <button id="prev" aria-label="Anterior">‚óÄ</button>
        <button id="next" aria-label="Siguiente">‚ñ∂</button>
      </div>
      <div class="dots" id="dots" aria-hidden="true"></div>
    </div>
  </section>

  <!-- ===== PLANES ===== -->
  <section class="container">
    <div class="section-title">
      <h2 class="reveal">Igualas que se adaptan a ti</h2>
      <p class="muted reveal">Acompa√±amiento continuo (sin precios en web, cotizaci√≥n por WhatsApp).</p>
    </div>
    <div class="plans">
      <div class="card plan reveal">
        <div class="head"><span class="badge">Full</span><h3>Iguala Full</h3></div>
        <ul>
          <li>Gesti√≥n completa contable y fiscal</li>
          <li>Informes y declaraciones</li>
          <li>Representaci√≥n ante la administraci√≥n p√∫blica</li>
          <li>Atenci√≥n permanente y personalizada</li>
        </ul>
      </div>
      <div class="card plan reveal">
        <div class="head"><span class="badge">Contable</span><h3>Iguala Contable</h3></div>
        <ul>
          <li>Llevamiento integral de contabilidad</li>
          <li>Estados financieros e informes</li>
          <li>Asesor√≠a contable personalizada</li>
        </ul>
      </div>
      <div class="card plan reveal">
        <div class="head"><span class="badge">Fiscal</span><h3>Iguala Fiscal</h3></div>
        <ul>
          <li>Cumplimiento y declaraciones fiscales</li>
          <li>Asesor√≠a fiscal estrat√©gica</li>
          <li>Prevenci√≥n de riesgos y multas</li>
        </ul>
      </div>
    </div>
    <div style="margin-top:10px" class="reveal">
      <a class="btn cta" href="https://wa.me/18494795252" target="_blank" rel="noopener">Cotizar por WhatsApp</a>
    </div>
  </section>

  <!-- ===== SOBRE M√ç ===== -->
  <section class="container">
    <div class="section-title">
      <h2 class="reveal">Conoce a Daisy Ubiera</h2>
      <p class="muted reveal">+10 a√±os de experiencia en contabilidad e impuestos</p>
    </div>
    <div class="about">
      <img class="reveal" style="aspect-ratio:4/3;object-fit:cover"
           src="https://i.postimg.cc/FswqjgYW/449687205-460106016755751-7158859507705071933-n.jpg"
           alt="Daisy Ubiera">
      <div class="bio reveal">
        <p>Soy <b>Daisy Ubiera</b>, Licenciada en Contabilidad y Auditor√≠a, con una Maestr√≠a en Direcci√≥n de Finanzas y cursando una Maestr√≠a en Direcci√≥n y Gesti√≥n Tributaria.</p>
        <p>Ayudo a pymes y emprendedores a mantener su contabilidad organizada, cumplir con DGII/TSS/SIRLA y tomar decisiones con informaci√≥n financiera confiable.</p>
        <div class="hero-actions"><a class="btn cta" href="https://wa.me/18494795252" target="_blank" rel="noopener">Hablemos por WhatsApp</a></div>
      </div>
    </div>
  </section>

  <!-- ===== FAQ ===== -->
  <section class="container">
    <div class="section-title">
      <h2 class="reveal">Preguntas frecuentes</h2>
      <p class="muted reveal">Transparencia y claridad para comenzar sin dudas.</p>
    </div>
    <details class="reveal"><summary>¬øAtienden presencial y virtual?</summary><p>S√≠. Atendemos de forma presencial y virtual. Cobertura nacional.</p></details>
    <details class="reveal"><summary>¬øHorarios de atenci√≥n?</summary><p>Lunes a viernes de 8:00 a 20:00 ¬∑ S√°bados y domingos de 8:00 a 17:00.</p></details>
    <details class="reveal"><summary>¬øManejan formatos 606/607/608/609?</summary><p>S√≠, preparamos y enviamos correctamente para evitar contingencias.</p></details>
    <details class="reveal"><summary>¬øImplementan Facturaci√≥n Electr√≥nica?</summary><p>S√≠, te guiamos en todo el proceso y buenas pr√°cticas.</p></details>
  </section>

  <!-- ===== CONTACTO ===== -->
  <section id="contacto" class="container">
    <div class="section-title">
      <h2 class="reveal">Contacto</h2>
      <p class="muted reveal">Estamos listos para ayudarte.</p>
    </div>
    <div class="contact">
      <div class="block reveal">
        <h3>Escr√≠benos</h3>
        <p class="muted">WhatsApp oficial</p>
        <a class="btn cta" href="https://wa.me/18494795252" target="_blank" rel="noopener">(+1) 849 479 5252</a>
      </div>
      <div class="block reveal">
        <h3>Horario</h3>
        <div class="schedule">
          <div><b>L‚ÄìV</b><br>8:00 am ‚Äì 8:00 pm</div>
          <div><b>S‚ÄìD</b><br>8:00 am ‚Äì 5:00 pm</div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      ¬© <span id="y"></span> Servicios Ubiera ¬∑ Asesor√≠a Contable, Financiera y Fiscal
    </div>
  </footer>

  <!-- ===== WhatsApp Sticky ===== -->
  <a class="wa" href="https://wa.me/18494795252" target="_blank" rel="noopener" aria-label="Cotizar por WhatsApp">
    <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20.52 3.48A11.93 11.93 0 0 0 12.05 0C5.46.03.11 5.38.13 11.97c0 2.11.55 4.08 1.52 5.8L0 24l6.39-1.64a12 12 0 0 0 5.66 1.45h.01c6.59 0 11.94-5.35 11.95-11.94A11.9 11.9 0 0 0 20.52 3.48ZM12.06 22a9.96 9.96 0 0 1-5.08-1.4l-.36-.21-3.79.97 1.01-3.69-.24-.38A10 10 0 1 1 22.06 12 10 10 0 0 1 12.06 22Z"/></svg>
    Cotizar
  </a>

<script>
  // A√±o footer
  document.getElementById('y').textContent = new Date().getFullYear();

  // ===== Tema claro/oscuro con persistencia =====
  const root = document.documentElement;
  const saved = localStorage.getItem('su-theme');
  if(saved){ root.setAttribute('data-theme', saved); }
  document.getElementById('themeToggle').addEventListener('click', ()=>{
    const t = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
    root.setAttribute('data-theme', t);
    localStorage.setItem('su-theme', t);
  });

  // ===== Reveal on scroll =====
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){ e.target.classList.add('show'); io.unobserve(e.target); }
    })
  },{threshold:.12});
  document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

  // ===== Carrusel circular con autoplay (2 s) y PAUSA al tocar/arrastrar =====
  const track = document.getElementById('track');
  const carousel = document.getElementById('carousel');
  const slides = Array.from(track.children);
  const total = slides.length;

  // Clones para loop
  const firstClone = slides[0].cloneNode(true);
  const lastClone  = slides[total-1].cloneNode(true);
  track.appendChild(firstClone);
  track.insertBefore(lastClone, slides[0]);

  let index = 1; // iniciamos en el primer real
  const width = ()=> track.children[0].getBoundingClientRect().width;
  const setPos = ()=> track.style.transform = `translateX(-${index * width()}px)`;
  window.addEventListener('resize', setPos);
  setPos();

  // Dots
  const dots = document.getElementById('dots');
  for(let i=0;i<total;i++){
    const d=document.createElement('span'); d.className='dot'+(i===0?' active':'');
    d.addEventListener('click',()=>{ stop(); goTo(i+1); start(); });
    dots.appendChild(d);
  }
  const dotEls = Array.from(dots.children);
  const activeDot = ()=> {
    dotEls.forEach(d=>d.classList.remove('active'));
    dotEls[(index-1+total)%total].classList.add('active');
  };

  // Navegaci√≥n
  const goTo = (i)=>{ index=i; track.style.transition='transform .55s var(--trans)'; setPos(); };
  const next = ()=> goTo(index+1);
  const prev = ()=> goTo(index-1);
  document.getElementById('next').addEventListener('click', ()=>{ stop(); next(); start(); });
  document.getElementById('prev').addEventListener('click', ()=>{ stop(); prev(); start(); });

  // Correcci√≥n al finalizar transici√≥n (saltos de clones)
  track.addEventListener('transitionend', ()=>{
    const items = track.children;
    if(items[index].isSameNode(items[items.length-1])){ // clone del primero
      track.style.transition='none'; index=1; setPos();
      void track.offsetWidth; track.style.transition='transform .55s var(--trans)';
    }
    if(items[index].isSameNode(items[0])){ // clone del √∫ltimo
      track.style.transition='none'; index=total; setPos();
      void track.offsetWidth; track.style.transition='transform .55s var(--trans)';
    }
    activeDot();
  });

  // Autoplay
  let timer;
  const start = ()=> timer = setInterval(next, 2000);
  const stop  = ()=> { if(timer) clearInterval(timer); };
  start();

  // PAUSA real al tocar/arrastrar + swipe horizontal
  let startX=0, dx=0, dragging=false;

  const onPointerDown = (e)=>{
    dragging=true; startX=e.clientX || (e.touches && e.touches[0].clientX) || 0;
    stop();
  };
  const onPointerMove = (e)=>{
    if(!dragging) return;
    const clientX = e.clientX || (e.touches && e.touches[0].clientX) || 0;
    dx = clientX - startX;
    track.style.transition='none';
    track.style.transform=`translateX(calc(-${index*width()}px + ${dx}px))`;
  };
  const onPointerUp = ()=>{
    if(!dragging) return;
    dragging=false;
    track.style.transition='transform .55s var(--trans)';
    if(Math.abs(dx) > 40){ dx>0 ? prev() : next(); } else { setPos(); }
    dx=0;
    start();
  };

  // Soporte t√°ctil y mouse
  carousel.addEventListener('pointerdown', onPointerDown);
  window.addEventListener('pointermove', onPointerMove);
  window.addEventListener('pointerup', onPointerUp);

  // Compat touch (algunos navegadores m√≥viles)
  carousel.addEventListener('touchstart', onPointerDown, {passive:true});
  window.addEventListener('touchmove', onPointerMove, {passive:true});
  window.addEventListener('touchend', onPointerUp);

  // Parar cuando el usuario pone el dedo encima aunque no arrastre
  ['mouseenter','focusin'].forEach(ev=>carousel.addEventListener(ev, stop));
  ['mouseleave','focusout'].forEach(ev=>carousel.addEventListener(ev, start));
</script>
</body>
</html>
